/*
 * Calculator Js
 */
jQuery(document).ready(function($) {$('#calc-ob').inputmask("currency");$('#calc-cb').inputmask("currency");$('#calc-pa').inputmask("currency");$('#calc-ca').inputmask("currency");$('#calc-mi').inputmask("currency");$('#calc-toi').inputmask("currency");$('#calc-le').inputmask("currency");
    $('#calc-loc').inputmask("percentage");$('#calc-ir').inputmask("percentage");$('#calc-ir').inputmask("percentage");
    $("#daily-tabular tr").slice(0, 4).show(); // select the first ten
    $("#load").click(function(e){ // click event for load more
        e.preventDefault(); $("#daily-tabular tr:hidden").slice(0, 4).show();
        if($("#daily-tabular tr:hidden").length == 0){ alert("No more loan days!"); }
    });
    $("#amort-tabular tr").slice(0, 4).show();
    $("#load2").click(function(e){ 
        e.preventDefault();
        $("#amort-tabular tr:hidden").slice(0, 4).show(); 
        if($("#amort-tabular tr:hidden").length == 0){ 
            alert("No more loan days!"); 
        }
    });
});
function calcTerm(){document.getElementById("dataTable").style.display="block";var t,e,a=Number(document.getElementById("calc-ob").inputmask.unmaskedvalue()),d=Number(document.getElementById("calc-cb").inputmask.unmaskedvalue()),n=Number(document.getElementById("calc-ir").inputmask.unmaskedvalue()),l=Number(document.getElementById("calc-term").value),c=Number(document.getElementById("calc-pa").inputmask.unmaskedvalue()),r=Number(document.getElementById("calc-ca").inputmask.unmaskedvalue()),u=Number(document.getElementById("calc-loc").inputmask.unmaskedvalue()),m=Number(document.getElementById("calc-toi").inputmask.unmaskedvalue()),i=Number(document.getElementById("calc-le").inputmask.unmaskedvalue()),o=h=String(document.getElementById("calc-sd").value),h=h.split(/[- ]+/).pop(1),g=[],s=0,y=0,p=0,b=10,v=0,k=0,I=0,B=0,E=0,D=1,F=1,f=o.split(/[- ]+/),N=String(f[0]+"-"+f[1]),x=new Date(N);document.getElementById("calc-days").value=h;for(var M=[],w=1,$=1,L=1,P=1,T=0;b>=0;){var Y=1==F?(F=786,x.getMonth()+1+"/"+x.getDate()+"/"+x.getFullYear()):(x.setDate(x.getDate()+1),x.getMonth()+1+"/"+x.getDate()+"/"+x.getFullYear()),S=new Date(Y),C=new Date(o);1==w?(T=d,w=786):T=T<0?0:T-p-E,1==$?(s=0,$=159):s=S<C?0:1==S.getDate()?c:0,M.push(s),y=-s>0?T*(n/100/12):0,p=0,1==L?(L=159,b=0):b=b<0?0:b+k+e+E-(M[D-2]+v),I+=t=b*(u/100)/365,v=S>C&&(1==S.getDate()||15==S.getDate())?m/2:0,k=1==S.getDate()?0==b?0:i:0,t>0&&1==S.getDate()?(1==P?(e=I,P=159):e=I-t,I=2*t):e=0,B+=e,E=S<C?0:C.getDate()==S.getDate()&&C.getMonth()==S.getMonth()&&C.getFullYear()==S.getFullYear()?r:b-v<=0?T>r?b+k+e+r-(v+s)>r?r-(b+i+e-(v+s)):r:T:0,Y.includes("/1/")&&g.push(["<hr>","<hr>","<hr>","<hr>","<hr>","<hr>","<hr>","<hr>","<hr>","<hr>","<hr>","<hr>"]),b<0&&(document.getElementById("calc-date").value=String(S).substr(0,16),document.getElementById("calc-days").value=D,document.getElementById("calc-years").value=(D/365).toFixed(1),document.getElementById("calc-ai").value="$"+B.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),document.getElementById("calc-hidden").value=B),g.push([Y,T.toFixed(2),s,y,p,b.toFixed(2),t.toFixed(2),u.toFixed(2)+"%",v,k,e.toFixed(2),E.toFixed(2)]),D++}daily(g=g.map(function(t){return t.map(function(t){return 0===t||"0.00"===t||void 0===t?"-":t})}));var H,j=[],z=1;for(var A,O,Q,R,q,G,J,K,U=(A=n/100/12,O=12*Number(l),Q=Number(a),q=0,(R=0)||(R=0),q||(q=0),0===A?-(Q+R)/O:(G=-A*Q*((J=Math.pow(1+A,O))+R)/(J-1),1===q&&(G/=1+A),G)),V=U.toFixed(2),W=1,X=1,Z=0;W>0;){1==X?X=786:d=W;var _=d*(n/100)/12,tt=_.toFixed(2);if((W=d-(-U-_))<0&&(W=0),j.push([(K=void 0,1==z?(z=786,(K=(H=o).split(/[- ]+/))[1]+"/"+K[2]+"/"+K[0]):((K=H.split(/[- ]+/))[1]>=1&&K[1]<=12&&K[1]++,13==K[1]&&(K[1]=1,K[0]=Number(K[0])+1),H=Number(K[0])+"-"+Number(K[1])+"-"+Number(K[2]),K[1]+"/"+K[2]+"/"+K[0])),d.toFixed(2),-V,tt,(-U-_).toFixed(2),W.toFixed(2)]),Z+=_,0==W){document.getElementById("calc-ti").value="$"+Z.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),document.getElementById("calc-is").value="$"+(Z-document.getElementById("calc-hidden").value).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");break}}amort(j)}function amort(t){var e;e="<div class='tab'>Amortization</div>",e+="<table id='amort-tabular'><thead><tr><th>Date</th><th>Mortgage</th><th>Mortgage Payment</th><th>Mortgage Interest</th><th>Mortgage Principal</th><th>Mortgage Balance</th></tr></thead><tbody>",t.forEach(function(t){e+="<tr><td>"+t[0]+"</td><td>"+t[1]+"</td><td>"+t[2]+"</td><td>"+t[3]+"</td><td>"+t[4]+"</td><td>"+t[5]+"</td></tr>",0}),e+="</tbody></table>",document.getElementById("amort").innerHTML=e}function daily(t){var e;e="<div class='tab'>Daily</div>",e+="<table id='daily-tabular'><thead><tr><th>Date</th><th>Mortgage Balance</th><th>Payment</th><th>Interest</th><th>Principal</th><th>LOC Balance</th><th>Daily Interest</th><th>Rate</th><th>Income</th><th>Living Expense</th><th>Monthly Interest</th><th>Chunk</th></tr></thead><tbody>",t.forEach(function(t){e+="<tr><td>"+t[0]+"</td><td>"+t[1]+"</td><td>"+t[2]+"</td><td>"+t[3]+"</td><td>"+t[4]+"</td><td>"+t[5]+"</td><td>"+t[6]+"</td><td>"+t[7]+"</td><td>"+t[8]+"</td><td>"+t[9]+"</td><td>"+t[10]+"</td><td>"+t[11]+"</td></tr>",0}),e+="</tbody></table>",document.getElementById("daily").innerHTML=e}jQuery(document).ready(function(t){t("#calc-ob").inputmask("currency"),t("#calc-cb").inputmask("currency"),t("#calc-pa").inputmask("currency"),t("#calc-ca").inputmask("currency"),t("#calc-mi").inputmask("currency"),t("#calc-toi").inputmask("currency"),t("#calc-le").inputmask("currency"),t("#calc-loc").inputmask("percentage"),t("#calc-ir").inputmask("percentage"),t("#calc-ir").inputmask("percentage"),t("#daily-tabular tr").slice(0,4).show(),t("#load").click(function(e){e.preventDefault(),t("#daily-tabular tr:hidden").slice(0,4).show(),0==t("#daily-tabular tr:hidden").length&&alert("No more loan days!")}),t("#amort-tabular tr").slice(0,4).show(),t("#load2").click(function(e){e.preventDefault(),t("#amort-tabular tr:hidden").slice(0,4).show(),0==t("#amort-tabular tr:hidden").length&&alert("No more loan days!")})});